# 钢琴卷帘 UI 设计

---

## 模式

+ 指针
+ 音符画笔
+ 音高控制点
+ 音高绘制
+ 音高橡皮
+ 音高固定笔刷
+ 颤音

## 键控

### 滚轮

+ 横向缩放：Ctrl + 滚轮
+ 纵向缩放：Ctrl + Shift + 滚轮
+ 横向移动：Shift + 滚轮
+ 纵向移动：滚轮

除纵向缩放外，其余修饰键可配置

### 空白处拖拽

+ 直接拖拽
    + 指针：框选音符
    + 音符画笔：绘制音符
    + 音高控制点：创建新音高控制点并移动
    + 音高绘制：绘制音高
    + 音高橡皮：删除鼠标经过区间的音高
    + 音高固定笔刷：将自动参数渲染到手动参数中
    + 颤音：框选颤音

+ 临时框选：Ctrl + 拖拽
    + 指针/音符画笔：框选音符
    + 音高控制点/音高绘制/音高橡皮/音高固定笔刷：框选音高控制点及音高曲线

+ 中心缩放：Ctrl + Alt + 拖拽
    + 以单击位置为中心缩放视图（参考 Melodyne）

音高三模式下，音高控制点始终显示，区别在于点击及拖拽时的行为

框选时，左键框选为画矩形，右键框选为画高度为无穷的矩形（即选择鼠标扫过的时间范围内所有的元素）

临时框选与中心缩放的修饰键可配置

### 点击

+ 删除音高控制点：双击音高控制迪点（可配置为中键单击）

+ 编辑歌词（连续）：指针模式下双击音符

+ 编辑歌词（单个 + 音素联想）：指针模式下 Ctrl + 单击音符

+ 左键点击音符或控制点
    + 直接点击：清除选区并选中
    + Ctrl + 点击：增加选中的元素
    + Shift + 点击：从第一个元素开始连续选到当前元素

+ 右键点击音符，弹出菜单
    + 删除
    + 编辑歌词（连续）
    + 编辑歌词（单个 + 音素联想）
    + 执行脚本

+ 右键点击控制点，弹出菜单
    + 删除
    + 改变插值方式
    + 执行脚本

+ 右键点击音高曲线轮廓，弹出菜单
    + 删除
    + 执行脚本

### 音符末尾拖拽

+ 直接拖拽：改变音长

+ Shift + 拖拽：若存在直接后继音符，则后面所有音符平移

+ Ctrl + 拖拽：若存在直接后继音符，则保证此音符与拖拽的音符长度之和不变

均可配置修饰键

以上可配置的修饰键为：Ctrl，Shift，Ctrl+Shift

音符移动或拖拽时按住 Alt 键可临时取消吸附